(this["webpackJsonpopyn-taco"]=this["webpackJsonpopyn-taco"]||[]).push([[13],{1665:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l}));var r={},o={},a=function(e,t){o[e]=t},i=function(e){var t=function(t,n){Object.assign(this,n),this.name=e,this.message=t||e,this.stack=(new Error).stack};return t.prototype=new Error,r[e]=t,t};i("AccountNameRequired"),i("AccountNotSupported"),i("AmountRequired"),i("BluetoothRequired"),i("BtcUnmatchedApp"),i("CantOpenDevice"),i("CashAddrNotSupported"),i("CurrencyNotSupported"),i("DeviceAppVerifyNotSupported"),i("DeviceGenuineSocketEarlyClose"),i("DeviceNotGenuine"),i("DeviceOnDashboardExpected"),i("DeviceOnDashboardUnexpected"),i("DeviceInOSUExpected"),i("DeviceHalted"),i("DeviceNameInvalid"),i("DeviceSocketFail"),i("DeviceSocketNoBulkStatus"),i("DisconnectedDevice"),i("DisconnectedDeviceDuringOperation"),i("EnpointConfig");var s=i("EthAppPleaseEnableContractData"),c=(i("FeeEstimationFailed"),i("FirmwareNotRecognized"),i("HardResetFail"),i("InvalidXRPTag"),i("InvalidAddress"),i("InvalidAddressBecauseDestinationIsAlsoSource"),i("LatestMCUInstalledError"),i("UnknownMCU"),i("LedgerAPIError"),i("LedgerAPIErrorWithMessage"),i("LedgerAPINotAvailable"),i("ManagerAppAlreadyInstalled"),i("ManagerAppRelyOnBTC"),i("ManagerAppDepInstallRequired"),i("ManagerAppDepUninstallRequired"),i("ManagerDeviceLocked"),i("ManagerFirmwareNotEnoughSpace"),i("ManagerNotEnoughSpace"),i("ManagerUninstallBTCDep"),i("NetworkDown"),i("NoAddressesFound"),i("NotEnoughBalance"),i("NotEnoughBalanceToDelegate"),i("NotEnoughBalanceInParentAccount"),i("NotEnoughSpendableBalance"),i("NotEnoughBalanceBecauseDestinationNotCreated"),i("NoAccessToCamera"),i("NotEnoughGas"),i("NotSupportedLegacyAddress"),i("GasLessThanEstimate"),i("PasswordsDontMatch"),i("PasswordIncorrect"),i("RecommendSubAccountsToEmpty"),i("RecommendUndelegation"),i("TimeoutTagged"),i("UnexpectedBootloader"),i("MCUNotGenuineToDashboard"),i("RecipientRequired"),i("UnavailableTezosOriginatedAccountReceive"),i("UnavailableTezosOriginatedAccountSend"),i("UpdateFetchFileFail"),i("UpdateIncorrectHash"),i("UpdateIncorrectSig"),i("UpdateYourApp"),i("UserRefusedDeviceNameChange"),i("UserRefusedAddress"),i("UserRefusedFirmwareUpdate"),i("UserRefusedAllowManager"),i("UserRefusedOnDevice"),i("TransportOpenUserCancelled"),i("TransportInterfaceNotAvailable"),i("TransportRaceCondition"));i("TransportWebUSBGestureRequired"),i("DeviceShouldStayInApp"),i("WebsocketConnectionError"),i("WebsocketConnectionFailed"),i("WrongDeviceForAccount"),i("WrongAppForCurrency"),i("ETHAddressNonEIP"),i("CantScanQRCode"),i("FeeNotLoaded"),i("FeeRequired"),i("FeeTooHigh"),i("SyncError"),i("PairingFailed"),i("GenuineCheckFailed"),i("LedgerAPI4xx"),i("LedgerAPI5xx"),i("FirmwareOrAppUpdateRequired"),i("NoDBPathGiven"),i("DBWrongPassword"),i("DBNotReset");function u(e,t){this.name="TransportError",this.message=e,this.stack=(new Error).stack,this.id=t}u.prototype=new Error,a("TransportError",(function(e){return new u(e.message,e.id)}));var d={PIN_REMAINING_ATTEMPTS:25536,INCORRECT_LENGTH:26368,MISSING_CRITICAL_PARAMETER:26624,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,SECURITY_STATUS_NOT_SATISFIED:27010,CONDITIONS_OF_USE_NOT_SATISFIED:27013,INCORRECT_DATA:27264,NOT_ENOUGH_MEMORY_SPACE:27268,REFERENCED_DATA_NOT_FOUND:27272,FILE_ALREADY_EXISTS:27273,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,CLA_NOT_SUPPORTED:28160,TECHNICAL_PROBLEM:28416,OK:36864,MEMORY_PROBLEM:37440,NO_EF_SELECTED:37888,INVALID_OFFSET:37890,FILE_NOT_FOUND:37892,INCONSISTENT_FILE:37896,ALGORITHM_NOT_SUPPORTED:38020,INVALID_KCV:38021,CODE_NOT_INITIALIZED:38914,ACCESS_CONDITION_NOT_FULFILLED:38916,CONTRADICTION_SECRET_CODE_STATUS:38920,CONTRADICTION_INVALIDATION:38928,CODE_BLOCKED:38976,MAX_VALUE_REACHED:38992,GP_AUTH_FAILED:25344,LICENSING:28482,HALTED:28586};function l(e){this.name="TransportStatusError";var t=Object.keys(d).find((function(t){return d[t]===e}))||"UNKNOWN_ERROR",n=function(e){switch(e){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received"}if(28416<=e&&e<=28671)return"Internal error, please report"}(e)||t,r=e.toString(16);this.message="Ledger device: "+n+" (0x"+r+")",this.stack=(new Error).stack,this.statusCode=e,this.statusText=t}l.prototype=new Error,a("TransportStatusError",(function(e){return new l(e.statusCode)}))},1870:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"default",(function(){return u}));var r=n(4),o=n(5),a=n(1871),i=n(1665);n(51);function s(t){return e.from(t.startsWith("0x")?t.slice(2):t,"hex")}function c(e){return e?s(e):null}var u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"w0w";Object(r.a)(this,t),this.transport=void 0,this.transport=e,e.decorateAppAPIMethods(this,["getAddress","provideERC20TokenInformation","signTransaction","signPersonalMessage","getAppConfiguration","starkGetPublicKey","starkSignOrder","starkSignTransfer","starkProvideQuantum"],n)}return Object(o.a)(t,[{key:"getAddress",value:function(t,n,r){var o=Object(a.b)(t),i=e.alloc(1+4*o.length);return i[0]=o.length,o.forEach((function(e,t){i.writeUInt32BE(e,1+4*t)})),this.transport.send(224,2,n?1:0,r?1:0,i).then((function(e){var t={},n=e[0],o=e[1+n];return t.publicKey=e.slice(1,1+n).toString("hex"),t.address="0x"+e.slice(1+n+1,1+n+1+o).toString("ascii"),r&&(t.chainCode=e.slice(1+n+1+o,1+n+1+o+32).toString("hex")),t}))}},{key:"provideERC20TokenInformation",value:function(e){var t=e.data;return this.transport.send(224,10,0,0,t).then((function(){return!0}),(function(e){if(e&&27904===e.statusCode)return!1;throw e}))}},{key:"signTransaction",value:function(t,n){for(var r,o=this,s=Object(a.b)(t),c=0,u=e.from(n,"hex"),d=[],l=function(){var t=0===c?149-4*s.length:150,n=c+t>u.length?u.length-c:t,r=e.alloc(0===c?1+4*s.length+n:n);0===c?(r[0]=s.length,s.forEach((function(e,t){r.writeUInt32BE(e,1+4*t)})),u.copy(r,1+4*s.length,c,c+n)):u.copy(r,0,c,c+n),d.push(r),c+=n};c!==u.length;)l();return Object(a.a)(d,(function(e,t){return o.transport.send(224,4,0===t?0:128,0,e).then((function(e){r=e}))})).then((function(){return{v:r.slice(0,1).toString("hex"),r:r.slice(1,33).toString("hex"),s:r.slice(33,65).toString("hex")}}),(function(e){throw function(e){return e&&27264===e.statusCode?new i.a("Please enable Contract data on the Ethereum app Settings"):e}(e)}))}},{key:"getAppConfiguration",value:function(){return this.transport.send(224,6,0,0).then((function(e){var t={};return t.arbitraryDataEnabled=1&e[0],t.erc20ProvisioningNecessary=2&e[0],t.starkEnabled=4&e[0],t.version=e[1]+"."+e[2]+"."+e[3],t}))}},{key:"signPersonalMessage",value:function(t,n){for(var r,o=this,i=Object(a.b)(t),s=0,c=e.from(n,"hex"),u=[],d=function(){var t=0===s?149-4*i.length-4:150,n=s+t>c.length?c.length-s:t,r=e.alloc(0===s?1+4*i.length+4+n:n);0===s?(r[0]=i.length,i.forEach((function(e,t){r.writeUInt32BE(e,1+4*t)})),r.writeUInt32BE(c.length,1+4*i.length),c.copy(r,1+4*i.length+4,s,s+n)):c.copy(r,0,s,s+n),u.push(r),s+=n};s!==c.length;)d();return Object(a.a)(u,(function(e,t){return o.transport.send(224,8,0===t?0:128,0,e).then((function(e){r=e}))})).then((function(){return{v:r[0],r:r.slice(1,33).toString("hex"),s:r.slice(33,65).toString("hex")}}))}},{key:"starkGetPublicKey",value:function(t,n){var r=Object(a.b)(t),o=e.alloc(1+4*r.length);return o[0]=r.length,r.forEach((function(e,t){o.writeUInt32BE(e,1+4*t)})),this.transport.send(240,2,n?1:0,0,o).then((function(e){return e.slice(0,e.length-2)}))}},{key:"starkSignOrder",value:function(t,n,r,o,i,s,u,d,l,h,p){var g=c(n),E=c(o),f=Object(a.b)(t),I=e.alloc(1+4*f.length+20+32+20+32+4+4+8+8+4+4,0),S=0;return I[0]=f.length,f.forEach((function(e,t){I.writeUInt32BE(e,1+4*t)})),S=1+4*f.length,g&&g.copy(I,S),S+=20,e.from(r.toString(16).padStart(64,"0"),"hex").copy(I,S),S+=32,E&&E.copy(I,S),S+=20,e.from(i.toString(16).padStart(64,"0"),"hex").copy(I,S),S+=32,I.writeUInt32BE(s,S),S+=4,I.writeUInt32BE(u,S),S+=4,e.from(d.toString(16).padStart(16,"0"),"hex").copy(I,S),S+=8,e.from(l.toString(16).padStart(16,"0"),"hex").copy(I,S),S+=8,I.writeUInt32BE(h,S),S+=4,I.writeUInt32BE(p,S),this.transport.send(240,4,1,0,I).then((function(e){return{r:e.slice(1,33).toString("hex"),s:e.slice(33,65).toString("hex")}}))}},{key:"starkSignTransfer",value:function(t,n,r,o,i,u,d,l,h){var p=c(n),g=s(o),E=Object(a.b)(t),f=e.alloc(1+4*E.length+20+32+32+4+4+8+4+4,0),I=0;return f[0]=E.length,E.forEach((function(e,t){f.writeUInt32BE(e,1+4*t)})),I=1+4*E.length,p&&p.copy(f,I),I+=20,e.from(r.toString(16).padStart(64,"0"),"hex").copy(f,I),I+=32,g.copy(f,I),I+=32,f.writeUInt32BE(i,I),I+=4,f.writeUInt32BE(u,I),I+=4,e.from(d.toString(16).padStart(16,"0"),"hex").copy(f,I),I+=8,f.writeUInt32BE(l,I),I+=4,f.writeUInt32BE(h,I),this.transport.send(240,4,2,0,f).then((function(e){return{r:e.slice(1,33).toString("hex"),s:e.slice(33,65).toString("hex")}}))}},{key:"starkProvideQuantum",value:function(t,n){var r=c(t),o=e.alloc(52,0);return r&&r.copy(o,0),e.from(n.toString(16).padStart(64,"0"),"hex").copy(o,20),this.transport.send(240,8,0,0,o).then((function(){return!0}),(function(e){if(e&&27904===e.statusCode)return!1;throw e}))}}]),t}()}.call(this,n(2).Buffer)},1871:function(e,t,n){"use strict";function r(e){var t=[];return e.split("/").forEach((function(e){var n=parseInt(e,10);isNaN(n)||(e.length>1&&"'"===e[e.length-1]&&(n+=2147483648),t.push(n))})),t}function o(e,t){return Promise.resolve().then((function(){return function e(n,r,o){return n>=r.length?o:t(r[n],n).then((function(t){return o.push(t),e(n+1,r,o)}))}(0,e,[])}))}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))}}]);
//# sourceMappingURL=13.5df80497.chunk.js.map